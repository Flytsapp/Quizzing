<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <input type="file" id="file-inp">
    <pre id="text">Contents here</pre>

</body>

<script>
    

const fileInp = document.getElementById("file-inp");
const txtout = document.getElementById("text");

let total_rounds = 0, ques_per_round = 0;
let quiz_data = []


function load_quiz(content=""){

    let rounds_split = content.split("\r\n~\r\n");
    
    let header = rounds_split[0].split("-");
    
    rounds_split = rounds_split.slice(1);
    
    total_rounds = parseInt(header[0]);
    ques_per_round = parseInt(header[1]);

    for (var round of rounds_split){

        quiz_data.push([]);

        let questions = round.split("\r\n\r\n");
        for(var question of questions){
            
            let question_split = question.split("\r\n");
            let questitle = question_split[0];
            let options = question_split.slice(1);
            let correct = 0;

            for (var i in options){
                if(options[i].startsWith(">")){
                    correct = parseInt(i);
                    break;
                }
            }

            let question_obj = {
                title: questitle,
                options: options,
                correct: correct
            }

            quiz_data[quiz_data.length-1].push(question_obj);

        }

    }

    console.log(quiz_data)

}


fileInp.onchange = ()=>{

    let file = fileInp.files[0];
    let reader = new FileReader();

    reader.onload = () => {
        load_quiz(reader.result);
    }

    reader.readAsText(file);

}


</script>

</html>